import{g as a,s as p}from"../../chunk-MQYXRLYI.mjs";import{a as s}from"../../chunk-OYOJMOFP.mjs";var i=class{constructor(e,t){this.baseAdapter=e;this.options=t}static{s(this,"ApolloServerMutationAdapter")}canHandle(e,t,o){return this.baseAdapter.canHandle(e,t,o)}getAdapterName(){return this.baseAdapter.getAdapterName()+"Mutation"}getRequest(e,t,o){let n=this.baseAdapter.getRequest(e,t,o);n.method="POST";let r=this.options.mutationName,d=p(this.options.mutationResultQuery,"{ __typename }"),u=JSON.stringify({operationName:r,query:`mutation ${r} ($event: String) { ${r} (event: $event) ${d} }`,variables:{event:n.body?.toString()||""}}),[c,g]=a(u,!1);return n.body=c,n.headers["content-type"]="application/json",n.headers["content-length"]=String(g),n}getResponse(e){let{data:t,errors:o}=JSON.parse(e.body);return o?this.baseAdapter.getResponse(e):this.baseAdapter.getResponse({...e,body:JSON.stringify(t[this.options.mutationName])})}onErrorWhileForwarding(e){return this.baseAdapter.onErrorWhileForwarding(e)}};export{i as ApolloServerMutationAdapter};
//# sourceMappingURL=index.mjs.map